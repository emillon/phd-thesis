\begin{tikzpicture}
[ stack/.style={draw,shape=rectangle,minimum height=1cm,minimum width=5cm}
, bigbrace/.style={decorate,decoration={brace,amplitude=3mm}}
, >=latex
]

  \path (0,0)   node [stack, minimum height=2cm] (gloc) {Locales de g}
  -- ++(0,-1.5) node [stack] (gebp) {Cadre précédent}
  -- ++(0,-1)   node [stack] (gret) {Retour de g}
  -- ++(0,-1.5) node [stack, minimum height=2cm] (gpar) {Arguments de g}
  -- ++(0,-1.5) node [stack] (floc) {Locales de f}
  -- ++(0,-1)   node [stack] (febp) {Cadre précédent}
  -- ++(0,-1)   node [stack] (fret) {Retour de f}
  -- ++(0,-1)   node [stack] (fpar) {Arguments de f};

  \draw [->] (gebp) -- ++(4, 0) |- (febp.5);
  \draw [->] (febp.355) -- ++(1.5, 0) -- ++(0,-4);

  \draw [dashed] (fpar.south west) -- ++ (0,-2);
  \draw [dashed] (fpar.south east) -- ++ (0,-2);
  \draw [dashed] (gloc.north east) -- ++ (0,2);
  \draw [dashed] (gloc.north west) -- ++ (0,2);

  \node at (5, 1) (ox) {};

  \node [text width=3cm] at (-0.8, 2)   {Adresses basses (sens de \asminstr{push})};
  \node [text width=3cm] at (-0.8, -10) {Adresses hautes (sens de \asminstr{pop})};

  \node [text width=3cm] at (-6, -3) (asmtext) {\tt
    g: push \%ebp \\
    mov \%esp, \%ebp \\
    sub \$8, \%esp \\
    ... \\
    leave \\
    ret \\
    f:  ... \\
    pushl \$2 \\
    pushl \$4 \\
    call g \\
    addl \$8, \%esp \\
    leave \\
    ret \\
    ... \\
    call f\\
    ...
    };

  \draw [->] (gret) -- ++ (-3, 0) |- ($ (asmtext.north west) + (2, -5.1) $);
  \draw [->] (fret) -- ++ (-3, 0) |- ($ (asmtext.north west) + (2, -7.7) $);

  \draw [<-] (gebp.west) -- ++ (-0.5,0) node [xshift=-4mm] {\ebp};
  \draw [<-] ($ (gloc.west) + (0,0.5) $) -- ++ (-0.5,0) node [xshift=-4mm] {\esp};

  \draw [<-] ($ (asmtext.north west) + (2.5, -1.7) $) -- ++ (0.5,0) node [xshift=3mm] {\eip};

  \draw [bigbrace]
        ($ (gloc.north east) + (3, 0) $)
     -- node [auto,midway,xshift=3mm] {Cadre de g}
        ($ (gpar.south east) + (3, 0.1) $);

  \draw [bigbrace]
        ($ (floc.north east) + (3, -0.1) $)
     -- node [auto,midway,xshift=3mm] {Cadre de f}
        ($ (fpar.south east) + (3, 0) $);

\end{tikzpicture}
