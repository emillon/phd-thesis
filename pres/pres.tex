\documentclass{beamer}
\usepackage[frenchb]{babel}
\usepackage[utf8]{inputenc}

\input{gen/pygments-style.tex}
\input{mellon.tex}

\usetheme{SAS}
\usetikzlibrary{arrows}
\usetikzlibrary{calc}
\usepackage{../pelagiccod}
\usepackage{booktabs}

\usepackage{amsmath,amsthm, amssymb, latexsym}
\usefonttheme[onlymath]{serif}
%\boldmath

\usepackage{fancyvrb}

\title{Analyse de sécurité de logiciels système par typage statique}
\subtitle{Application au noyau Linux}
\author{Étienne Millon}
\date{10 juillet 2014}

\begin{document}

\AtBeginSubsection[]
{
  \addtocounter{framenumber}{-1}
  \begin{frame}<beamer>
   \frametitle{Outline}
   \tableofcontents[currentsubsection]
 \end{frame}
}

\frame{\titlepage}

\frame{\tableofcontents}

\section{Le confused deputy problem} % TODO emph

\begin{frame}[fragile]{Séparation}
\begin{tikzpicture}
  [user/.style={fill=MellonGreen}
  ,kernel/.style={fill=MellonPink}
  ]

  % Memory zone
  %
  % #1 - start
  % #2 - end
  % #3 - color
  \newcommand{\mzone}[3]{
    \path[#3] (#1,0) rectangle (#2,1);
  }

  % Address label
  %
  % #1 - x position
  % #2 - text
  \newcommand{\alabel}[2]{
    \path (#1,1) -- ++(0,0.3) node [pos=1] {\small \tt #2};
  }

  % exec
  \mzone{0.5}{1}{user}

  % lib
  \mzone{2.5}{3.2}{user}

  % stack
  \mzone{3.7}{4}{user}

  % stack
  \mzone{5}{5.5}{user}

  % kernel
  \mzone{6}{8}{kernel}

  % contour
  \draw (0,0) rectangle (8,1);

  \node at (2, -0.7) {Programme};
  \node at (7, -0.7) {Noyau};

  \draw[>=triangle 45,<->,ultra thick] (3.8, -0.7) -- node[auto] {Appels système} ++(2, 0);
  \draw[>=triangle 45,<->,ultra thick] (7, -1) -- node[auto,swap] {Instructions
  privilégiées} ++(0, -1) node (Htop) {};

  \path (Htop) -- ++(-1,-1) node (Htopleft) {};
  \draw (Htopleft) rectangle ++(2, -2);

  \foreach \x in {0,...,9} {
      \draw ($ (Htopleft) + (0.1 + 0.2*\x,  0) $) -- ++(0,  0.3);
      \draw ($ (Htopleft) + (0.1 + 0.2*\x, -2) $) -- ++(0, -0.3);
      \draw ($ (Htopleft) + (0, -0.2*\x - 0.1) $) -- ++(-0.3, 0);
      \draw ($ (Htopleft) + (2, -0.2*\x - 0.1) $) -- ++( 0.3, 0);
   }

  \path (Htop) -- ++(0, -2) node { Matériel };

  \alabel{0}{0}
  \alabel{6}{3 Go}
  \alabel{8}{4 Go}

\end{tikzpicture}
\end{frame}

\begin{frame}{Droits}

Execution of a piece of code:

\begin{itemize}
    \item with processor at level P
    \item with privilege level C
    \item accessing data with level D
\end{itemize}

is possible iff

\[ P ≤ \min\{C; D\} \]

\end{frame}

\begin{frame}{Droits}
On x86, levels are \emph{rings}:

Kernel $= 0$ and User $= 3$.

\begin{center}
\def\modeK{~Kernel~}
\def\modeU{~User~}
\def\accOK{OK}
\def\accNO{--}
\begin{tabular}{cccc}
\toprule
  P
& C
& D
& Access \\
\midrule
  \modeK{} & \modeK{} & \modeK{} & \accOK \\
  \modeK{} & \modeK{} & \modeU{} & \accOK \\
  \modeK{} & \modeU{} & \modeK{} & \accOK \\
  \modeK{} & \modeU{} & \modeU{} & \accOK \\
  \modeU{} & \modeK{} & \modeK{} & \accNO \\
  \modeU{} & \modeK{} & \modeU{} & \accNO \\
  \modeU{} & \modeU{} & \modeK{} & \accNO \\
  \modeU{} & \modeU{} & \modeU{} & \accOK \\
\bottomrule
\end{tabular}
\end{center}

\end{frame}

\section{Contributions}

\subsection{Un langage impératif bien typé}
\frame{x}
\subsection{Une sémantique basée sur les lentilles}
\frame{x}
\subsection{Un système de types abstraits}
\frame{x}
\subsection{Un prototype d'analyseur statique}
\frame{x}

\section{Types abstraits pour C}

\frame{x}

\end{document}
